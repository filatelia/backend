<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>

<body>
    <form id="formulario" enctype="multipart/form-data">

        <input type="file" id="inp" name="fotos_producto" multiple id="">


    </form>
    <button onclick="enviar()" class="btn btn-success">Enviar</button>


    <script>
        function enviar() {
            //Taemos el formulario
            var formData = new FormData(document.getElementById("formulario"));
            //Traemos los datos del input file multiple
            var fotos_producto = document.getElementById("inp");

            var cantidad_productos = [];
            var obj = new Object(
                {
                    color_hex: "#123121",
                    cantidad: 12
                });
                cantidad_productos.push(obj);
                var obj = new Object(
                {
                    color_hex: "#1FFFFFFF",
                    cantidad: 1
                });
                cantidad_productos.push(obj);


            console.log(cantidad_productos);
            const json = cantidad_productos;


            var tamanios = [];
            tamanios.push("Grande");
            tamanios.push("Pequeño");


                
            formData.append("cantidad_productos", JSON.stringify (cantidad_productos) );
            
            formData.append("nombre_producto", "Estampilla dorada");
            formData.append("id_usuario", "60775d7eddb0b610f83d117a");
            formData.append("categoria", "6085cba8ac8965069884f067");
            formData.append("descripcion", "Éste es un producto de prueba");
            formData.append("precio_normal", 1500);
            formData.append("precio_descuento", 1354);
            formData.append("tarifa_envio", 0);
            formData.append("moneda_producto", "USD");
            tamanios.map(data=> formData.append("tamanios", data));
            





            const Http = new XMLHttpRequest();
            const url = 'http://localhost:3000/api/tienda/producto';
            Http.open("POST", url);

            Http.send(formData);

            var colores = [];

            Http.onreadystatechange = (e) => {
                colores.push(Http.responseText);
            }
            console.log(colores);

        }



    </script>



</body>

</html>